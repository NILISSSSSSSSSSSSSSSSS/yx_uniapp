(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesBuild/buildDetail/addEditDistributionType"],{"12c9":function(t,i,e){"use strict";var a,s=function(){var t=this,i=t.$createElement;t._self._c},o=[];e.d(i,"b",function(){return s}),e.d(i,"c",function(){return o}),e.d(i,"a",function(){return a})},"1e8a":function(t,i,e){"use strict";var a=e("6ba7"),s=e.n(a);s.a},"3a53":function(t,i,e){"use strict";e.r(i);var a=e("5c9c"),s=e.n(a);for(var o in a)"default"!==o&&function(t){e.d(i,t,function(){return a[t]})}(o);i["default"]=s.a},"5c9c":function(t,i,e){"use strict";(function(t,a){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=e("71c1"),o=e("a538"),n=e("1675"),u=e("4464"),l=e("b0ea"),r=e("2b2e"),d={data:function(){return{paramsObj:{buildId:"",buildArea:"",charact:"",downPayments:"",halls:"",layoutId:"",oldLayoutNo:"",layoutNo:"",layoutPics:"",layoutStatus:null,photoIds:"",price:"",rooms:"",tagIds:"",weis:"",yangs:""},layoutStatusList:[{value:1,name:"待售"},{value:2,name:"在售"},{value:3,name:"售罄"}],layoutStatusIndex:null,tagIdsList:[],selectTagIds:[],selectPhotos:[],timeS:null,timeT:null,timeW:null,timeY:null}},onLoad:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.dealTagIds(),this.paramsObj.buildId=i.buildId,"add"===i.type?t.setNavigationBarTitle({title:"添加户型"}):(t.setNavigationBarTitle({title:"编辑户型"}),this.getDetail())},methods:{getDetail:function(){var t=this,i=(new u.buildModel).getModel("distributionItem")||{};for(var e in console.log(a(i,"obj"," at pagesBuild\\buildDetail\\addEditDistributionType.vue:186")),this.paramsObj)this.paramsObj[e]=i[e];this.paramsObj.oldLayoutNo=i.layoutNo,this.paramsObj.buildId=this.buildId,this.layoutStatusList.forEach(function(e,a){i.layoutStatus===e.value&&(t.layoutStatusIndex=a)}),i.tagIds&&(this.selectTagIds=i.tagIds.split("|"),this.tagIdsList.forEach(function(i,e){var a=!0,s=!1,o=void 0;try{for(var n,u=t.selectTagIds[Symbol.iterator]();!(a=(n=u.next()).done);a=!0){var l=n.value;i.name===l&&(t.tagIdsList[e].isActive=!0)}}catch(r){s=!0,o=r}finally{try{a||null==u.return||u.return()}finally{if(s)throw o}}}));var s=!0,o=!1,n=void 0;try{for(var l,r=i.list[Symbol.iterator]();!(s=(l=r.next()).done);s=!0){var d=l.value;this.selectPhotos.push({picUrl:d.picUrl,photoId:d.photoId})}}catch(c){o=!0,n=c}finally{try{s||null==r.return||r.return()}finally{if(o)throw n}}},layoutStatusChange:function(t){this.layoutStatusIndex=t.target.value,this.paramsObj.layoutStatus=this.layoutStatusList[t.target.value].value},dealTagIds:function(){var t=o.Const.distributionTypeIds;for(var i in t)this.tagIdsList.push({name:t[i],isActive:!1});console.log(a(this.tagIdsList,"tagIdsList"," at pagesBuild\\buildDetail\\addEditDistributionType.vue:231"))},changeTags:function(t,i){if(this.tagIdsList[i].isActive){var e=0;this.selectTagIds.forEach(function(i,a){t===i.name&&(e=a)}),this.selectTagIds.splice(e,1),this.tagIdsList[i].isActive=!1}else{if(this.selectTagIds.length>=3)return void this.DifferenceApi.showToast("最多选择3个");this.selectTagIds.push(t),this.tagIdsList[i].isActive=!0}},uploadImg:function(){var i=this;t.chooseImage({count:1,success:function(e){console.log(a(e.tempFilePaths[0]," at pagesBuild\\buildDetail\\addEditDistributionType.vue:259")),t.showLoading({title:"上传中..."}),(new n.Utils).upLoadImg(e.tempFilePaths[0]).then(function(e){if(console.log(a(e," at pagesBuild\\buildDetail\\addEditDistributionType.vue:263")),t.hideLoading(),e.errCode!==o.Const.success)return Promise.reject(e);var s=e.data||{};if(!s.path||!s.url)return null;i.selectPhotos.push({picUrl:s.url})}).catch(function(i){console.log(a("err",i," at pagesBuild\\buildDetail\\addEditDistributionType.vue:275")),t.hideLoading(),t.showToast({title:i.errMsg||"上传失败",icon:"none"})})}})},saveBtn:function(){var i=this;if(this.paramsObj.layoutNo)if(this.paramsObj.rooms&&this.paramsObj.halls&&this.paramsObj.weis&&this.paramsObj.yangs)if(this.paramsObj.layoutStatus)if(this.paramsObj.buildArea)if(this.paramsObj.price)if(this.paramsObj.downPayments)if(0!==this.selectTagIds.length)if(this.paramsObj.tagIds=this.selectTagIds.join("|"),this.paramsObj.charact)if(0!==this.selectPhotos.length){var e=[],n=[],u=!0,d=!1,c=void 0;try{for(var h,f=this.selectPhotos[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var p=h.value;e.push(p.picUrl),p.photoId&&n.push(p.photoId)}}catch(m){d=!0,c=m}finally{try{u||null==f.return||f.return()}finally{if(d)throw c}}this.paramsObj.layoutPics=e.join(","),this.paramsObj.photoIds=n.join(","),console.log(a(this.paramsObj,"paramsObj"," at pagesBuild\\buildDetail\\addEditDistributionType.vue:334")),new s.AddAndChangLayOutPhoto(this.paramsObj).send().then(function(e){console.log(a(e," at pagesBuild\\buildDetail\\addEditDistributionType.vue:337")),e.errCode!==o.Const.success?i.DifferenceApi.showToast(e.errMsg):(i.DifferenceApi.showToast("提交成功"),(new r.Notification).postNotification(l.Notify.DistributionChange.Name),t.navigateBack({delta:1}))})}else this.DifferenceApi.showToast("请上传户型图");else this.DifferenceApi.showToast("请输入推荐理由");else this.DifferenceApi.showToast("请选择标签");else this.DifferenceApi.showToast("请输入首付起价");else this.DifferenceApi.showToast("请输入户型总价");else this.DifferenceApi.showToast("请输入面积");else this.DifferenceApi.showToast("请选择状态");else this.DifferenceApi.showToast("请完善户型");else this.DifferenceApi.showToast("请输入户型名称")},inputNumS:function(t){var i=this;clearTimeout(this.timeS),""!==t.detail.value&&Number(t.detail.value)<=0&&(this.timeS=setTimeout(function(){i.paramsObj.rooms=""},10))},inputNumT:function(t){var i=this;clearTimeout(this.timeT),""!==t.detail.value&&Number(t.detail.value)<=0&&(this.timeT=setTimeout(function(){i.paramsObj.halls=""},10))},inputNumW:function(t){var i=this;clearTimeout(this.timeW),""!==t.detail.value&&Number(t.detail.value)<=0&&(this.timeW=setTimeout(function(){i.paramsObj.weis=""},10))},inputNumY:function(t){var i=this;clearTimeout(this.timeY),""!==t.detail.value&&Number(t.detail.value)<=0&&(this.timeY=setTimeout(function(){i.paramsObj.yangs=""},10))}}};i.default=d}).call(this,e("6e42")["default"],e("0de9")["default"])},"6ba7":function(t,i,e){},"6bca":function(t,i,e){},"6caa":function(t,i,e){"use strict";var a=e("6bca"),s=e.n(a);s.a},"6d90":function(t,i,e){"use strict";(function(t){e("3ea8"),e("921b");a(e("66fd"));var i=a(e("d074"));function a(t){return t&&t.__esModule?t:{default:t}}t(i.default)}).call(this,e("6e42")["createPage"])},d074:function(t,i,e){"use strict";e.r(i);var a=e("12c9"),s=e("3a53");for(var o in s)"default"!==o&&function(t){e.d(i,t,function(){return s[t]})}(o);e("1e8a"),e("6caa");var n,u=e("f0c5"),l=Object(u["a"])(s["default"],a["b"],a["c"],!1,null,"8b526490",null,!1,a["a"],n);i["default"]=l.exports}},[["6d90","common/runtime","common/vendor"]]]);