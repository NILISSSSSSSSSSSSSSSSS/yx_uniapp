(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesBuild/buildDetail/photoList"],{1005:function(t,e,o){"use strict";(function(t){o("3ea8"),o("921b");i(o("66fd"));var e=i(o("7800"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("6e42")["createPage"])},"6faf":function(t,e,o){"use strict";var i=o("88fd"),n=o.n(i);n.a},7800:function(t,e,o){"use strict";o.r(e);var i=o("9a35"),n=o("dffe");for(var a in n)"default"!==a&&function(t){o.d(e,t,function(){return n[t]})}(a);o("6faf"),o("f9da");var l,u=o("f0c5"),s=Object(u["a"])(n["default"],i["b"],i["c"],!1,null,"5fd594e6",null,!1,i["a"],l);e["default"]=s.exports},"88fd":function(t,e,o){},"9a35":function(t,e,o){"use strict";var i,n=function(){var t=this,e=t.$createElement;t._self._c},a=[];o.d(e,"b",function(){return n}),o.d(e,"c",function(){return a}),o.d(e,"a",function(){return i})},"9f2c":function(t,e,o){},a14d:function(t,e,o){"use strict";(function(t,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o("71c1"),a=o("5962"),l=o("1675"),u=o("a538"),s=o("4464"),d=o("b0ea"),r=o("2b2e"),c={data:function(){return{accountSource:null,buildId:"",selectBoxValue:"qjt",vrList:[],listObj:{},photoTypeObj:{1:{name:"效果图",value:"xgt",addType:2},2:{name:"规划图",value:"ght",addType:5},3:{name:"户型图",value:"hxt",addType:3},4:{name:"样板间",value:"ybt",addType:7},5:{name:"实景图",value:"sjt",addType:8},6:{name:"配套图",value:"ptt",addType:6}}}},onLoad:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.buildId=t.buildId,this.initData()},onShow:function(){this.accountSource=a.GetLoginModel.getAccountSource()},methods:{initData:function(){var e=this;new n.GetNewBuildPhotoListByType({flag:1,buildId:this.buildId}).send().then(function(o){if(console.log(t(o," at pagesBuild\\buildDetail\\photoList.vue:81")),o.errCode!==u.Const.success)e.DifferenceApi.showToast(o.errMsg);else{var i=o.data;e.vrList=i.vrList||[];var n=i.list||[],a=0;for(var l in e.photoTypeObj)e.listObj[l]={name:"",list:[]};var d=!0,r=!1,c=void 0;try{for(var f,h=n[Symbol.iterator]();!(d=(f=h.next()).done);d=!0){var p=f.value,g=!0,v=!1,b=void 0;try{for(var m,y=p.oneList[Symbol.iterator]();!(g=(m=y.next()).done);g=!0){var L=m.value;L.allIndex=a,a++}}catch(j){v=!0,b=j}finally{try{g||null==y.return||y.return()}finally{if(v)throw b}}e.listObj[p.photoType].list=p.oneList}}catch(j){r=!0,c=j}finally{try{d||null==h.return||h.return()}finally{if(r)throw c}}for(var T in(new s.buildModel).setModel(JSON.parse(JSON.stringify(n)),"photoList"),e.photoTypeObj)e.listObj[T].name=e.photoTypeObj[T].value,2===e.accountSource&&(e.listObj[T].list.length>0?e.listObj[T].list.push({photoUrl:"http://cdn.haofang.net/static/xfldDeveloper/build/add-img.png",photoId:""}):e.listObj[T].list=[{photoUrl:"http://cdn.haofang.net/static/xfldDeveloper/build/add-img.png",photoId:""}]);0===e.vrList.length&&(e.selectBoxValue="xgt"),console.log(t(e.listObj," at pagesBuild\\buildDetail\\photoList.vue:122"))}})},selectBox:function(t){this.selectBoxValue=t},goToVr:function(t){(new s.buildModel).setModel(t,"path"),i.navigateTo({url:"/pagesBuild/buildDetail/vrPage"})},imgVrError:function(t){this.vrList[t].photoAddr="http://cdn.haofang.net/static/xfldDeveloper/build/default-house-img.png"},imgBtn:function(e,o,n){1===this.accountSource&&(n=!1),n?(console.log(t("上传图片"," at pagesBuild\\buildDetail\\photoList.vue:145")),this.uploadImg(this.photoTypeObj[o].addType)):i.navigateTo({url:"/pagesBuild/buildDetail/photoListSwiper?allIndex="+e})},uploadImg:function(e){var o=this;i.chooseImage({count:1,success:function(a){console.log(t(a.tempFilePaths[0]," at pagesBuild\\buildDetail\\photoList.vue:160")),i.showLoading({title:"上传中..."}),(new l.Utils).upLoadImg(a.tempFilePaths[0]).then(function(a){if(console.log(t(a," at pagesBuild\\buildDetail\\photoList.vue:164")),i.hideLoading(),a.errCode!==u.Const.success)return Promise.reject(a);var l=a.data||{};if(!l.path||!l.url)return null;new n.AddBuildPhoto({photoAttr:l.path,photoType:e,buildId:o.buildId}).send().then(function(t){if(t.errCode!==u.Const.success)return Promise.reject(t);o.initData(),(new r.Notification).postNotification(d.Notify.PhotoChange.Name)})}).catch(function(e){console.log(t("err",e," at pagesBuild\\buildDetail\\photoList.vue:185")),i.hideLoading(),i.showToast({title:e.errMsg||"上传失败",icon:"none"})})}})},delImg:function(e,o,a){console.log(t("删除图片"," at pagesBuild\\buildDetail\\photoList.vue:194"));var l=this;i.showModal({title:"提示",content:"是否确认删除？",success:function(i){i.confirm&&new n.DeleteOneLayOutPhoto({buildId:l.buildId,photoId:e}).send().then(function(e){e.errCode!==u.Const.success?l.DifferenceApi.showToast(e.errMsg):(l.DifferenceApi.showToast("删除成功"),console.log(t(l.listObj[o].list,o,a," at pagesBuild\\buildDetail\\photoList.vue:209")),l.listObj[o].list.splice(a,1),l.$forceUpdate(),(new r.Notification).postNotification(d.Notify.PhotoChange.Name))})}})}}};e.default=c}).call(this,o("0de9")["default"],o("6e42")["default"])},dffe:function(t,e,o){"use strict";o.r(e);var i=o("a14d"),n=o.n(i);for(var a in i)"default"!==a&&function(t){o.d(e,t,function(){return i[t]})}(a);e["default"]=n.a},f9da:function(t,e,o){"use strict";var i=o("9f2c"),n=o.n(i);n.a}},[["1005","common/runtime","common/vendor"]]]);