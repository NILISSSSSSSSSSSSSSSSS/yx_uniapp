(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesMsg/contacts/contacts"],{"2fca":function(t,a,n){"use strict";n.r(a);var e=n("408e"),r=n.n(e);for(var o in e)"default"!==o&&function(t){n.d(a,t,function(){return e[t]})}(o);a["default"]=r.a},"408e":function(t,a,n){"use strict";(function(t,e){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var r=n("a538"),o=n("1675"),s=n("5969"),c=n("5962");function i(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function u(t,a,n){return a in t?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n,t}var l=function(){return n.e("components/showModal").then(n.bind(null,"9551"))},f=function t(){i(this,t),u(this,"avatar",""),u(this,"consultantId",""),u(this,"consultantImId",""),u(this,"consultantMobile",""),u(this,"consultantName",""),u(this,"firstLetter",""),u(this,"firstName",""),u(this,"status",0)},d=function t(){i(this,t)};u(d,"pageOffset",1),u(d,"pageRows",20);var h={components:{showModal:l},data:function(){return{contractList:null,currentClickItem:{},isScrollIng:!1,haveMoreData:!0,accountSource:c.GetLoginModel.getAccountSource()}},onLoad:function(){2==c.GetLoginModel.getAccountSource()&&this.initData(),1==c.GetLoginModel.getAccountSource()&&this.initAdviserList()},methods:{initData:function(){var t=this;return this.haveMoreData=!0,2==c.GetLoginModel.getAccountSource()?(new s.LoginApp).upContractList().then(function(a){if(a.errCode!==r.Const.success)return Promise.reject(a);var n=a.data&&a.data.consultantList||[],e=[],s=[],i=!0,u=!1,l=void 0;try{for(var d,h=n[Symbol.iterator]();!(i=(d=h.next()).done);i=!0){var m=d.value,v=new f;v.avatar=m.avatar||"",v.avatar&&(v.avatar=(new o.Utils).dealImgSrcSize(v.avatar,120,120)),2==c.GetLoginModel.getAccountSource()&&(v.status=3),v.avatar=v.avatar||r.Const.imDefaultHeadImg,v.consultantId=m.consultantId||"",v.consultantImId=m.consultantImId||"",v.consultantMobile=m.consultantMobile||"",v.consultantName=m.consultantName||"",v.firstLetter=m.firstLetter||"",v.firstName=m.consultantName?m.consultantName.substring(0,1):"",m.managerFlag&&1==m.managerFlag?s.push(v):e.push(v)}}catch(g){u=!0,l=g}finally{try{i||null==h.return||h.return()}finally{if(u)throw l}}return t.contractList=s.concat(e),t.contractList}).catch(function(a){t.DifferenceApi.showToast(res.errMsg||"请求失败")}):(new s.LoginApp).upContractList().then(function(t){if(t.errCode!==r.Const.success)return Promise.reject(t);var a=t.data&&t.data.consultantList||[],n=[],e=[],s=!0,c=!1,i=void 0;try{for(var u,l=a[Symbol.iterator]();!(s=(u=l.next()).done);s=!0){var d=u.value,h=new f;h.avatar=d.avatar||"",h.avatar&&(h.avatar=(new o.Utils).dealImgSrcSize(h.avatar,120,120)),h.avatar=h.avatar||r.Const.imDefaultHeadImg,h.consultantId=d.consultantId||"",h.consultantImId=d.consultantImId||"",h.consultantMobile=d.consultantMobile||"",h.consultantName=d.consultantName||"",h.firstLetter=d.firstLetter||"",h.status=2,h.firstName=d.consultantName?d.consultantName.substring(0,1):"",d.managerFlag&&1==d.managerFlag?(e.push(h),h.status=3):n.push(h)}}catch(m){c=!0,i=m}finally{try{s||null==l.return||l.return()}finally{if(c)throw i}}return e.concat(n)}).catch(function(a){t.DifferenceApi.showToast(res.errMsg||"请求失败")})},initAdviserList:function(){var a=this;return Promise.all([this.initData(),this.dealArchiveList()]).then(function(n){console.error(t(n," at pagesMsg\\contacts\\contacts.vue:195")),a.contractList=n[1].concat(n[0])})},dealArchiveList:function(){var t=this;return(new s.LoginApp).getBrokeList(d.pageOffset,d.pageRows).then(function(a){if(a.errCode!==r.Const.success)return Promise.reject(a);var n=a.data&&a.data.list||[],e=[],s=[];n.length<d.pageRows&&(t.haveMoreData=!1);var c=!0,i=!1,u=void 0;try{for(var l,h=n[Symbol.iterator]();!(c=(l=h.next()).done);c=!0){var m=l.value,v=new f;v.avatar=m.brokerAvatarUrl||"",v.avatar&&(v.avatar=(new o.Utils).dealImgSrcSize(v.avatar,120,120)),v.avatar=v.avatar||r.Const.imDefaultHeadImg,v.consultantId=m.archiveId||"",v.consultantImId=m.archiveId||"",v.consultantMobile=m.brokerMobile||"",v.consultantName=m.brokerName||"",v.status=1,m.manageFlag&&1==m.manageFlag?(v.status=3,v.consultantImId="ld_"+v.consultantImId,s.push(v)):e.push(v)}}catch(g){i=!0,u=g}finally{try{c||null==h.return||h.return()}finally{if(i)throw u}}return s.concat(e)})},goIm:function(t){t.consultantImId?e.navigateTo({url:"/pagesMsg/msgDetail/msgDetail?messageId="+t.consultantImId+"&name="+t.consultantName}):this.DifferenceApi.showToast("暂为找到该经纪人云信Id")},takePhone:function(t){t.consultantMobile?(this.currentClickItem=t,this.$refs.modal.show()):this.DifferenceApi.showToast("暂无电话")},onModalChanged:function(t){t&&this.DifferenceApi.makePhoneCall(this.currentClickItem.consultantMobile)},scrolltolower:function(){var t=this;2!=c.GetLoginModel.getAccountSource()&&this.haveMoreData&&!this.isScrollIng&&(this.isScrollIng=!0,d.pageOffset++,this.dealArchiveList().then(function(a){t.contractList=(t.contractList||[]).concat(a),t.isScrollIng=!1}))},imgError:function(t){var a=this.contractList[t]||{};a.avatar=r.Const.imDefaultHeadImg,this.$set(this.contractList,t,a)}}};a.default=h}).call(this,n("0de9")["default"],n("6e42")["default"])},"5ab2":function(t,a,n){"use strict";var e,r=function(){var t=this,a=t.$createElement,n=(t._self._c,{title:"拨打电话",content:t.currentClickItem.consultantMobile||"",confirmText:"呼叫",cancelColor:"rgba(0,0,0,0.6)",confirmColor:"#3396fb"});t.$mp.data=Object.assign({},{$root:{a0:n}})},o=[];n.d(a,"b",function(){return r}),n.d(a,"c",function(){return o}),n.d(a,"a",function(){return e})},"88b1":function(t,a,n){"use strict";n.r(a);var e=n("5ab2"),r=n("2fca");for(var o in r)"default"!==o&&function(t){n.d(a,t,function(){return r[t]})}(o);n("ee5f");var s,c=n("f0c5"),i=Object(c["a"])(r["default"],e["b"],e["c"],!1,null,null,null,!1,e["a"],s);a["default"]=i.exports},"962f":function(t,a,n){},ee5f:function(t,a,n){"use strict";var e=n("962f"),r=n.n(e);r.a},ef87:function(t,a,n){"use strict";(function(t){n("3ea8"),n("921b");e(n("66fd"));var a=e(n("88b1"));function e(t){return t&&t.__esModule?t:{default:t}}t(a.default)}).call(this,n("6e42")["createPage"])}},[["ef87","common/runtime","common/vendor"]]]);