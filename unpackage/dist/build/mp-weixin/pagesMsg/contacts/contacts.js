(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesMsg/contacts/contacts"],{4812:function(t,a,n){"use strict";n.r(a);var e=n("d13e"),r=n.n(e);for(var o in e)"default"!==o&&function(t){n.d(a,t,function(){return e[t]})}(o);a["default"]=r.a},"7cce":function(t,a,n){"use strict";var e=n("af5d"),r=n.n(e);r.a},abc0:function(t,a,n){"use strict";var e=function(){var t=this,a=t.$createElement,n=(t._self._c,{title:"拨打电话",content:t.currentClickItem.consultantMobile||"",confirmText:"呼叫",cancelColor:"rgba(0,0,0,0.6)",confirmColor:"#3396fb"});t.$mp.data=Object.assign({},{$root:{a0:n}})},r=[];n.d(a,"a",function(){return e}),n.d(a,"b",function(){return r})},af5d:function(t,a,n){},b1d6:function(t,a,n){"use strict";n.r(a);var e=n("abc0"),r=n("4812");for(var o in r)"default"!==o&&function(t){n.d(a,t,function(){return r[t]})}(o);n("7cce");var i=n("2877"),c=Object(i["a"])(r["default"],e["a"],e["b"],!1,null,null,null);a["default"]=c.exports},b760:function(t,a,n){"use strict";(function(t){n("d3e9"),n("921b");e(n("66fd"));var a=e(n("b1d6"));function e(t){return t&&t.__esModule?t:{default:t}}t(a.default)}).call(this,n("543d")["createPage"])},d13e:function(t,a,n){"use strict";(function(t){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var e=n("a0ec"),r=n("2f2e"),o=n("68bf"),i=n("6594");function c(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function s(t,a,n){return a in t?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n,t}var u=function(){return n.e("components/showModal").then(n.bind(null,"b881"))},l=function t(){c(this,t),s(this,"avatar",""),s(this,"consultantId",""),s(this,"consultantImId",""),s(this,"consultantMobile",""),s(this,"consultantName",""),s(this,"firstLetter",""),s(this,"firstName",""),s(this,"status",0)},f=function t(){c(this,t)};s(f,"pageOffset",1),s(f,"pageRows",20);var d={components:{showModal:u},data:function(){return{contractList:null,currentClickItem:{},isScrollIng:!1,haveMoreData:!0,accountSource:i.GetLoginModel.getAccountSource()}},onLoad:function(){2==i.GetLoginModel.getAccountSource()&&this.initData(),1==i.GetLoginModel.getAccountSource()&&this.initAdviserList()},methods:{initData:function(){var t=this;return this.haveMoreData=!0,2==i.GetLoginModel.getAccountSource()?(new o.LoginApp).upContractList().then(function(a){if(a.errCode!==e.Const.success)return Promise.reject(a);var n=a.data&&a.data.consultantList||[],o=[],c=[],s=!0,u=!1,f=void 0;try{for(var d,h=n[Symbol.iterator]();!(s=(d=h.next()).done);s=!0){var m=d.value,v=new l;v.avatar=m.avatar||"",v.avatar&&(v.avatar=(new r.Utils).dealImgSrcSize(v.avatar,120,120)),2==i.GetLoginModel.getAccountSource()&&(v.status=3),v.avatar=v.avatar||e.Const.imDefaultHeadImg,v.consultantId=m.consultantId||"",v.consultantImId=m.consultantImId||"",v.consultantMobile=m.consultantMobile||"",v.consultantName=m.consultantName||"",v.firstLetter=m.firstLetter||"",v.firstName=m.consultantName?m.consultantName.substring(0,1):"",m.managerFlag&&1==m.managerFlag?c.push(v):o.push(v)}}catch(g){u=!0,f=g}finally{try{s||null==h.return||h.return()}finally{if(u)throw f}}return t.contractList=c.concat(o),t.contractList}).catch(function(a){t.DifferenceApi.showToast(res.errMsg||"请求失败")}):(new o.LoginApp).upContractList().then(function(t){if(t.errCode!==e.Const.success)return Promise.reject(t);var a=t.data&&t.data.consultantList||[],n=[],o=[],i=!0,c=!1,s=void 0;try{for(var u,f=a[Symbol.iterator]();!(i=(u=f.next()).done);i=!0){var d=u.value,h=new l;h.avatar=d.avatar||"",h.avatar&&(h.avatar=(new r.Utils).dealImgSrcSize(h.avatar,120,120)),h.avatar=h.avatar||e.Const.imDefaultHeadImg,h.consultantId=d.consultantId||"",h.consultantImId=d.consultantImId||"",h.consultantMobile=d.consultantMobile||"",h.consultantName=d.consultantName||"",h.firstLetter=d.firstLetter||"",h.status=2,h.firstName=d.consultantName?d.consultantName.substring(0,1):"",d.managerFlag&&1==d.managerFlag?(o.push(h),h.status=3):n.push(h)}}catch(m){c=!0,s=m}finally{try{i||null==f.return||f.return()}finally{if(c)throw s}}return o.concat(n)}).catch(function(a){t.DifferenceApi.showToast(res.errMsg||"请求失败")})},initAdviserList:function(){var t=this;return Promise.all([this.initData(),this.dealArchiveList()]).then(function(a){console.error(a),t.contractList=a[1].concat(a[0])})},dealArchiveList:function(){var t=this;return(new o.LoginApp).getBrokeList(f.pageOffset,f.pageRows).then(function(a){if(a.errCode!==e.Const.success)return Promise.reject(a);var n=a.data&&a.data.list||[],o=[],i=[];n.length<f.pageRows&&(t.haveMoreData=!1);var c=!0,s=!1,u=void 0;try{for(var d,h=n[Symbol.iterator]();!(c=(d=h.next()).done);c=!0){var m=d.value,v=new l;v.avatar=m.brokerAvatarUrl||"",v.avatar&&(v.avatar=(new r.Utils).dealImgSrcSize(v.avatar,120,120)),v.avatar=v.avatar||e.Const.imDefaultHeadImg,v.consultantId=m.archiveId||"",v.consultantImId=m.archiveId||"",v.consultantMobile=m.brokerMobile||"",v.consultantName=m.brokerName||"",v.status=1,m.manageFlag&&1==m.manageFlag?(v.status=3,v.consultantImId="ld_"+v.consultantImId,i.push(v)):o.push(v)}}catch(g){s=!0,u=g}finally{try{c||null==h.return||h.return()}finally{if(s)throw u}}return i.concat(o)})},goIm:function(a){a.consultantImId?t.navigateTo({url:"/pagesMsg/msgDetail/msgDetail?messageId="+a.consultantImId+"&name="+a.consultantName}):this.DifferenceApi.showToast("暂为找到该经纪人云信Id")},takePhone:function(t){t.consultantMobile?(this.currentClickItem=t,this.$refs.modal.show()):this.DifferenceApi.showToast("暂无电话")},onModalChanged:function(t){t&&this.DifferenceApi.makePhoneCall(this.currentClickItem.consultantMobile)},scrolltolower:function(){var t=this;2!=i.GetLoginModel.getAccountSource()&&this.haveMoreData&&!this.isScrollIng&&(this.isScrollIng=!0,f.pageOffset++,this.dealArchiveList().then(function(a){t.contractList=(t.contractList||[]).concat(a),t.isScrollIng=!1}))},imgError:function(t){var a=this.contractList[t]||{};a.avatar=e.Const.imDefaultHeadImg,this.$set(this.contractList,t,a)}}};a.default=d}).call(this,n("543d")["default"])}},[["b760","common/runtime","common/vendor"]]]);