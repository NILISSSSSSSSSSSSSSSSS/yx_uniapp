(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesCustomer/signInfo/signInfo"],{"2fae":function(t,e,i){"use strict";(function(t){i("d3e9"),i("921b");n(i("66fd"));var e=n(i("8d77"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},7273:function(t,e,i){},"8d77":function(t,e,i){"use strict";i.r(e);var n=i("d1bf"),s=i("ddfa");for(var o in s)"default"!==o&&function(t){i.d(e,t,function(){return s[t]})}(o);i("9396");var u=i("2877"),a=Object(u["a"])(s["default"],n["a"],n["b"],!1,null,null,null);e["default"]=a.exports},9396:function(t,e,i){"use strict";var n=i("7273"),s=i.n(n);s.a},c682:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i("8c03"),s=i("a0ec"),o=i("22d5"),u=i("6594"),a=i("3d98"),c=i("451a"),r=i("eb5b"),h={},d={data:function(){return{cityId:"",custId:"",houseNo:"",houseArea:"",dealAmount:"",commission:"",custStatus:"",directCustomer:0,huXinTypeList:null,huXinIndex:"",checkHuXin:""}},onLoad:function(t){h=t,console.log(t,"--signInfo接收页面参数--")},onShow:function(){this.iniData(),this.cityId=h.cityId||"",this.custId=h.custId||"",this.houseNo=h.houseNo||"",this.custStatus=h.custStatus||"",this.houseArea=h.houseArea||"",this.dealAmount=h.dealAmount||"",this.commission=h.commission||"",this.directCustomer=h.directCustomer||"",this.checkHuXin=h.layoutNo||""},methods:{inputHouseNo:function(t){this.houseNo=t.detail.value},inputHouseArea:function(t){this.houseArea=t.detail.value},inputDealAmount:function(t){this.dealAmount=t.detail.value},inputCommission:function(t){this.commission=t.detail.value},confirmBtn:function(){var e=this;this.huXinTypeList&&0===this.huXinTypeList.length?this.DifferenceApi.showToast("请先添加户型"):this.huXinIndex?this.houseNo?this.houseArea?this.dealAmount?this.commission||0!=this.directCustomer?(t.showLoading({title:"请求中...",mask:n.Config.mask}),new o.RequestOrSign({cityId:this.cityId,custId:this.custId,custStatus:this.custStatus,houseNo:this.houseNo,houseArea:this.houseArea,dealAmount:this.dealAmount,commission:this.commission,layoutNo:this.checkHuXin}).send().then(function(i){if(t.hideLoading(),i.errCode!==s.Const.success)return Promise.reject(i);var n=(new r.CustomerModel).getModel()||"";n.userId&&(new c.ImSendMessage).sendNotifyMsg("ld_"+n.userId),e.DifferenceApi.showToast("签约成功"),setTimeout(function(){t.navigateBack({delta:1})},1e3)}).catch(function(i){t.hideLoading(),e.DifferenceApi.showToast(i.errMsg||"请求失败")})):this.DifferenceApi.showToast("请输入预计结佣金额"):this.DifferenceApi.showToast("请输入成交金额"):this.DifferenceApi.showToast("请输入产权面积"):this.DifferenceApi.showToast("请输入房号"):this.DifferenceApi.showToast("请选择户型")},iniData:function(){var t=this,e=u.GetLoginModel.getBuildId();new a.GetBuildLayouts({buildId:e}).send().then(function(e){if(e.errCode!==s.Const.success)return Promise.reject(e);if(e.data&&e.data.layoutNo&&0===e.data.layoutNo.length)t.huXinTypeList=[];else{var i=[],n=!0,o=!1,u=void 0;try{for(var a,c=e.data.layoutNo[Symbol.iterator]();!(n=(a=c.next()).done);n=!0){var r=a.value;i.push({value:r})}}catch(d){o=!0,u=d}finally{try{n||null==c.return||c.return()}finally{if(o)throw u}}if(t.checkHuXin)for(var h in i)i[h].value==t.checkHuXin&&(t.huXinIndex=h);t.huXinTypeList=i}}).catch(function(e){t.DifferenceApi.showToast(e.errMsg||"服务器开小差了,请稍后再试")})},huXinChangePicker:function(t){this.huXinTypeList?(this.huXinIndex=t.target.value,this.checkHuXin=this.huXinTypeList[t.target.value].value):this.DifferenceApi.showToast("请先添加户型")},addLayout:function(){this.DifferenceApi.showToast("请先添加户型")}}};e.default=d}).call(this,i("543d")["default"])},d1bf:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},s=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return s})},ddfa:function(t,e,i){"use strict";i.r(e);var n=i("c682"),s=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);e["default"]=s.a}},[["2fae","common/runtime","common/vendor"]]]);