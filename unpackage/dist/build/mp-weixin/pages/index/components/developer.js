(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/components/developer"],{"1a1e":function(e,i,t){"use strict";var n=t("854c"),o=t.n(n);o.a},"62f6":function(e,i,t){"use strict";var n=function(){var e=this,i=e.$createElement;e._self._c},o=[];t.d(i,"a",function(){return n}),t.d(i,"b",function(){return o})},"7dc5":function(e,i,t){"use strict";t.r(i);var n=t("d188"),o=t.n(n);for(var a in n)"default"!==a&&function(e){t.d(i,e,function(){return n[e]})}(a);i["default"]=o.a},"854c":function(e,i,t){},d188:function(e,i,t){"use strict";(function(e){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t("6594"),o=t("a0ec"),a=t("b049"),s=(t("2647"),t("451a")),u=t("e26c"),r=t("10c9"),l=t("baf9"),d=t("68bf"),c=t("835c");function m(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function f(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}var h=function(){return Promise.all([t.e("common/vendor"),t.e("components/echarts/circleProcess")]).then(t.bind(null,"73e2"))},g=function(){return Promise.all([t.e("common/vendor"),t.e("components/echarts/ringChart")]).then(t.bind(null,"ed20"))},v=function e(){m(this,e)};f(v,"colorMap",(new Map).set(0,"#0084ff").set(1,"#13c2c2").set(2,"#ffb109").set(3,"#9083f8").set(4,"#ff625b"));var N={components:{circleProcess:h,ringChart:g},data:function(){return{buildId:"",buildDataNumMap:{},buildName:"",tuiGuangWeekNum:"",tuiGuangMonthNum:"",buildList:[],buildModel:!1,buildContModel:!1,customInfo:{baoBeiNum:0,oldBaoBeiNum:0,daiKanNum:0,oldDaiKanNum:0,renGouNum:0,oldRenGouNum:0,signNum:0,oldSignNum:0,jieYongNum:0,oldJieYongNum:0,jieYongPrice:0,oldJieYongPrice:0},showGun:!1,customGenJinInfo:{haveCustom:!1,unLookMsgNum:0,lastMsgText:"",time:""},customZhlInfo:{baoBeiLv:0,daiKanLv:0,signLv:0,jieYongLv:0},saleBiInfo:{allVal:0,list:[]},deptBiInfo:{allVal:0,list:[],show:!1},saleBiActiveIndex:1}},mounted:function(){this.initData(),(new l.Notification).addObserver(this,"UpChartMsgChanged",r.Notify.UpChartMsgChanged.Name),(new l.Notification).addObserver(this,"PageShowChange",r.Notify.PageShowChange.Name),(new l.Notification).addObserver(this,"PageHideChange",r.Notify.PageHideChange.Name),(new l.Notification).addObserver(this,"ImLinkSuccessChange",r.Notify.ImLinkSuccessChange.Name)},destroyed:function(){(new l.Notification).removeObserverAllNotification(this)},methods:{UpChartMsgChanged:function(){this.initRemindMsg(),this.initRemindList()},ImLinkSuccessChange:function(){this.buildName=n.GetLoginModel.getBuildName(),this.initRemindList()},PageShowChange:function(e,i){"index"===i.source&&this.initData()},PageHideChange:function(e,i){"index"===i.source&&(this.showGun=!1)},initData:function(){var e=this;(new c.ListUserRelativeBuilding).send().then(function(i){if(i.errCode===o.Const.success){var t={},n=i.data&&i.data.buildingList||[],a=!0,s=!1,u=void 0;try{for(var r,l=n[Symbol.iterator]();!(a=(r=l.next()).done);a=!0){var d=r.value;t[d.buildId]=d}}catch(c){s=!0,u=c}finally{try{a||null==l.return||l.return()}finally{if(s)throw u}}e.buildDataNumMap=t}}),this.buildId=n.GetLoginModel.getBuildId(),this.buildName=n.GetLoginModel.getBuildName(),this.initBuildList(),this.initBuildSpreadParam(),this.initCustomStatus(),this.initRemindList(),this.initRemindMsg(),this.initCustomZhl(),this.initSaleBi()},initBuildList:function(){var e=this;if(n.GetLoginModel.getBuildId()&&0!=n.GetLoginModel.getBuildId())return(new a.GetUserManageBuildList).send().then(function(i){if(i.errCode!==o.Const.success)return Promise.reject(i);var t=i.data&&i.data.buildList||[],n=[],a=!0,s=!1,u=void 0;try{for(var r,l=t[Symbol.iterator]();!(a=(r=l.next()).done);a=!0){var d=r.value;d.buildId&&d.buildName&&n.push({buildId:d.buildId,buildName:d.buildName,isActive:d.isActive||0})}}catch(c){s=!0,u=c}finally{try{a||null==l.return||l.return()}finally{if(s)throw u}}e.buildList=n}).catch(function(i){e.DifferenceApi.showToast(i.errMsg||"获取楼盘列表失败啦")})},initBuildSpreadParam:function(){var e=this;return(new a.GetSpreadParam).send().then(function(i){if(i.errCode!==o.Const.success)return Promise.reject(i);e.tuiGuangWeekNum=i.data&&i.data.spreadDay||0,e.tuiGuangMonthNum=i.data&&i.data.spreadMonth||0}).catch(function(e){})},initRemindMsg:function(){this.customGenJinInfo.unLookMsgNum=s.UpUnReadNumTab.getUnReadNum(u.ProjectConfigConst.remindMsgMessageId)||0},initRemindList:function(){var e=this;this.ImChart.imChartVal&&this.ImChart.getHistoryOriginal(u.ProjectConfigConst.remindMsgMessageId).then(function(i){var t=i&&i.msgs||[],n=e.customGenJinInfo;if(0!==t.length){t=t.sort(new d.compare("time").maxToMin());var o=JSON.parse(t[0].content),a=o.data||{};n.haveCustom=!0,n.lastMsgText=a.CONTENT||"暂无内容",n.time=(0,d.formatTimeNew)(t[0].time||(new Date).getTime()),e.customGenJinInfo=n}else e.customGenJinInfo.haveCustom=!1})},initCustomStatus:function(){var e=this;return(new a.TodayCustStc).send().then(function(i){if(i.errCode!==o.Const.success)return Promise.reject(i);var t=i.data||{},n=e.customInfo||{};n.oldBaoBeiNum=n.baoBeiNum,n.oldDaiKanNum=n.daiKanNum,n.oldRenGouNum=n.renGouNum,n.oldSignNum=n.signNum,n.oldJieYongNum=n.jieYongNum,n.oldJieYongPrice=n.jieYongPrice,n.baoBeiNum=t.report||0,n.daiKanNum=t.band||0,n.renGouNum=t.subscription||0,n.signNum=t.sign||0,n.jieYongNum=t.settle||0,n.jieYongPrice=t.commission||0,e.customInfo=n,e.showGun=!0,setTimeout(function(){n.oldBaoBeiNum=n.baoBeiNum,n.oldDaiKanNum=n.daiKanNum,n.oldRenGouNum=n.renGouNum,n.oldSignNum=n.signNum,n.oldJieYongNum=n.jieYongNum,n.oldJieYongPrice=n.jieYongPrice,e.customInfo=n},150)}).catch(function(i){e.DifferenceApi.showToast(i.errMsg||"获取今日客户情况失败")})},initCustomZhl:function(){var e=this;return new a.CustStatisticInfo({date:""}).send().then(function(i){if(i.errCode!==o.Const.success)return Promise.reject(i);var t=i.data||{};e.customZhlInfo={baoBeiLv:t.reportRate||0,daiKanLv:t.bandRate||0,signLv:t.signRate||0,jieYongLv:t.commissionRate||0}}).catch(function(i){e.DifferenceApi.showToast(i.errMsg||"获取客户转换率失败")})},initSaleBi:function(){var e=this;return Promise.all([new a.SellProportion({type:1}).send(),new a.SellProportion({type:2}).send()]).then(function(i){var t=e.dealSaleBi(i[0].data||[]),n=e.dealSaleBi(i[1].data||[]);e.saleBiInfo={allVal:t.allNum,list:t.list},e.deptBiInfo={allVal:n.allNum,list:n.list,show:!!((i[1].data||[]).length>1)}})},dealSaleBi:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=[],t=0,n={color:v.colorMap.get(4),biLi:0,val:0,text:"其他"},o=0;o<e.length;o++){var a=e[o]||{};t+=a.sellNum||0,e.length>5&&o>3?(n.biLi+=a.percent||0,n.val+=a.sellNum||0):i.push({color:v.colorMap.get(o),text:a.name||"未知",biLi:a.percent?Math.round(100*a.percent*1e3)/1e3:0,val:a.sellNum||0})}e.length>5&&(n.biLi=Math.round(100*n.biLi*1e3)/1e3,i.push(n));for(var s=[],u={},r=0,l=0;l<i.length;l++){var d=i[l]||{};l!==i.length-1||100===r?(r+=d.biLi,d.biLi+="%",s.push(d)):(u=d,u.biLi=100-r+"%")}return Object.keys(u).length>0&&s.push(u),{list:s,allNum:t}},showChangeBuild:function(){this.buildList.length<=1||(this.buildContModel=!0,this.buildModel=!0)},changeBuild:function(e,i){var t=this;if(e.buildId==n.GetLoginModel.getBuildId())return this.closeBuildModal(),this.DifferenceApi.showToast("切换成功"),void(this.saleBiActiveIndex=1);new a.ChangeBuild({buildId:e.buildId}).send().then(function(i){if(i.errCode!==o.Const.success)return Promise.reject(i);t.closeBuildModal(),t.saleBiActiveIndex=1,t.DifferenceApi.showToast("切换成功"),n.SetLoginModel.setBuildId(e.buildId),n.SetLoginModel.setBuildName(e.buildName);var a=[],s=!0,u=!1,r=void 0;try{for(var l,d=t.buildList[Symbol.iterator]();!(s=(l=d.next()).done);s=!0){var c=l.value;c.isActive=0,c.buildId==e.buildId&&(c.isActive=1),a.push(c)}}catch(m){u=!0,r=m}finally{try{s||null==d.return||d.return()}finally{if(u)throw r}}t.buildList=a,t.initData()}).catch(function(e){t.DifferenceApi.showToast(e.errMsg||"切换失败")})},closeBuildModal:function(){var e=this;this.buildContModel=!1,setTimeout(function(){e.buildModel=!1},100)},goToRemindMsg:function(){s.UpUnReadNumTab.removeReadNum(u.ProjectConfigConst.remindMsgMessageId),this.customGenJinInfo.unLookMsgNum=0,e.navigateTo({url:"/pagesMsg/remindMsg/remindMsg"})},changeSaleType:function(e){this.saleBiActiveIndex=Number(e)},goToStatistics:function(){e.navigateTo({url:"/pagesStatistics/analysis/analysis"})}}};i.default=N}).call(this,t("543d")["default"])},ec4d:function(e,i,t){"use strict";t.r(i);var n=t("62f6"),o=t("7dc5");for(var a in o)"default"!==a&&function(e){t.d(i,e,function(){return o[e]})}(a);t("1a1e");var s=t("2877"),u=Object(s["a"])(o["default"],n["a"],n["b"],!1,null,"55c9ac40",null);i["default"]=u.exports}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'pages/index/components/developer-create-component',
    {
        'pages/index/components/developer-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("ec4d"))
        })
    },
    [['pages/index/components/developer-create-component']]
]);
