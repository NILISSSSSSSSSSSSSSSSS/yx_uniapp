(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesStaff/staffList/staffList"],{"1aed":function(t,e,i){"use strict";(function(t){i("d3e9"),i("921b");n(i("66fd"));var e=n(i("e569"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},"8ac8":function(t,e,i){"use strict";i.r(e);var n=i("b2a5"),o=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);e["default"]=o.a},"96fb":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=(t._self._c,{title:"温馨提示",content:"您确定要注销"+(t.currentItem.userName||"")+"，确认操作？",confirmText:"确定"}),n={title:"调动员工",content:"请先移交该员工的客户，才能进行调动",confirmText:"确定"};t.$mp.data=Object.assign({},{$root:{a0:i,a1:n}})},o=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o})},"9e2b":function(t,e,i){"use strict";var n=i("f390"),o=i.n(n);o.a},b2a5:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i("bcff"),o=i("a0ec"),s=i("6594"),r=i("b049");function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var c=function(){return i.e("pagesStaff/components/noData").then(i.bind(null,"d578"))},l=function t(){a(this,t)};u(l,"nodeAll",[]),u(l,"requesting",!1),u(l,"buildList",[]),u(l,"chooseBuildItem",null),u(l,"scrollTop",0);var d={components:{noData:c},data:function(){return{userList:null,fixTop:"",showSetModal:!1,setList:[{imgSrc:"http://cdn.haofang.net/static/xfldDeveloper/customer/custom_qx.png",text:"权限配置",className:"custom_qx",event:"qxConfig"},{imgSrc:"http://cdn.haofang.net/static/xfldDeveloper/customer/custom_dd.png",text:"人员调动",className:"custom_dd",event:"ryConfig"},{imgSrc:"http://cdn.haofang.net/static/xfldDeveloper/customer/custom_yj.png",text:"客户移交",className:"custom_yj",event:"yjConfig"},{imgSrc:"http://cdn.haofang.net/static/xfldDeveloper/customer/custom_close.png",text:"账号注销",className:"custom_close",event:"zxConfig"}],currentIndex:0,currentItem:{userName:""},authorityList:[{title:"报备审核",subject:"报备客户后审核是否同意带看",value:1},{title:"带看确客",subject:"客户到现场后确认是否进入带看",value:2},{title:"认购管理",subject:"确认客户是否达成购买意向",value:3},{checked:!1,title:"签约管理",subject:"确认客户是否签署购房合同",value:4},{checked:!1,title:"结佣管理",subject:"对审核结佣的信息进行确认和结算",value:5}],checkedAuthorityMap:{},checkImgSrc:"http://cdn.haofang.net/static/xfldDeveloper/customer/yg_check.png",checkedImgSrc:"http://cdn.haofang.net/static/xfldDeveloper/customer/yg_checked.png",authorityModal:!1,buildList:[],chooseBuildModal:!1}},onShow:function(){this.iniData(),this.showSetModal=!1},methods:{initBuildList:function(){var t=this;if(s.GetLoginModel.getBuildId()&&0!=s.GetLoginModel.getBuildId())return(new r.GetUserManageBuildList).send().then(function(e){if(e.errCode!==o.Const.success)return Promise.reject(e);l.buildList=e.data&&e.data.buildList||[];var i=[],n=!0,s=!1,r=void 0;try{for(var a,u=l.buildList[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var c=a.value;c.buildId&&c.buildName&&1!=c.isActive&&i.push({buildId:c.buildId,buildName:c.buildName,isActive:c.isActive||0})}}catch(d){s=!0,r=d}finally{try{n||null==u.return||u.return()}finally{if(s)throw r}}t.buildList=i}).catch(function(t){l.buildList=[]});l.buildList=[]},iniData:function(){var t=this;return this.initBuildList(),(new n.GetAllUserListForStaff).send().then(function(e){if(200!=e.errCode)return t.DifferenceApi.showToast(e.errMsg||"服务器开小差了,请稍后再试"),t.userList=[],e;if(e.data.userList&&e.data.userList.length<0)return t.userList=[],e;var i=[],n=!0,o=!1,s=void 0;try{for(var r,a=e.data.userList[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var u=r.value;u.userJurisdiction?u.userJurisdiction=u.userJurisdiction.split(" "):u.userJurisdiction=[],i.push(u)}}catch(c){o=!0,s=c}finally{try{n||null==a.return||a.return()}finally{if(o)throw s}}return t.userList=i,setTimeout(function(){t.createSelectorQuery(t).selectAll(".dian_icon").boundingClientRect(function(t){l.nodeAll=[];var e=!0,i=!1,n=void 0;try{for(var o,s=t[Symbol.iterator]();!(e=(o=s.next()).done);e=!0){var r=o.value;r.top+=l.scrollTop,l.nodeAll.push(r)}}catch(c){i=!0,n=c}finally{try{e||null==s.return||s.return()}finally{if(i)throw n}}}).exec()},200),e}).catch(function(e){return t.DifferenceApi.showToast(e.errMsg||"请求失败"),e})},addStaff:function(){t.navigateTo({url:"/pagesStaff/addStaff/addStaff"})},pageClick:function(){this.showSetModal=!1},openOperationList:function(t,e){var i=this,n=this.setList;n[1].classNameDisabled="",n[2].classNameDisabled="",t.seeCount&&0!=t.seeCount||(n[2].classNameDisabled="fixed_item_disabled"),l.buildList.length<2&&(n[1].classNameDisabled="fixed_item_disabled"),this.setList=n,this.currentItem=t;var o=l.nodeAll[e].top;if(console.log(o,"--fixTop--"),!this.showSetModal)return this.currentIndex=e,this.fixTop=o,void setTimeout(function(){i.showSetModal=!0},20);this.currentIndex=e,this.showSetModal=!1,setTimeout(function(){i.fixTop=o},10),setTimeout(function(){i.showSetModal=!0},20)},onScroll:function(t){l.scrollTop=t.detail.scrollTop||0},setConfig:function(t){this[t.event](t)},zxConfig:function(t){this.$refs.modal.show()},onModalChanged:function(t){var e=this;if(t){if(l.requesting)return;l.requesting=!0,new n.CancelUser({userId:this.currentItem.userId}).send().then(function(t){if(t.errCode!==o.Const.success)return Promise.reject(t);e.showSetModal=!1,e.DifferenceApi.showToast("注销成功"),e.iniData(),l.requesting=!1}).catch(function(t){l.requesting=!1,e.DifferenceApi.showToast(t.errMsg||"服务器开小差了,请稍后再试")})}},qxConfig:function(t){var e={},i=!0,n=!1,o=void 0;try{for(var s,r=(this.currentItem.userJurisdiction||[])[Symbol.iterator]();!(i=(s=r.next()).done);i=!0){var a=s.value;e[Number(a)]=!0}}catch(u){n=!0,o=u}finally{try{i||null==r.return||r.return()}finally{if(n)throw o}}this.checkedAuthorityMap=e,this.authorityModal=!0},ryConfig:function(t){l.buildList.length<2||(this.currentItem.seeCount&&this.currentItem.seeCount>0?this.$refs.ygModal.show():(this.chooseBuildModal=!0,this.chooseBuildChange({detail:{value:[0]}})))},onYgModalChanged:function(e){e&&t.navigateTo({url:"/pagesStaff/customerTransfer/chooseCustomer?userId="+this.currentItem.userId})},chooseBuildChange:function(t){l.chooseBuildItem=this.buildList[t.detail.value[0]]},chooseBuild:function(t){l.chooseBuildItem=t,this.confirmChooseBuild()},cancelChooseBuild:function(){this.chooseBuildModal=!1},confirmChooseBuild:function(){var e=this;l.requesting||(t.showLoading({title:"设置中...",mask:!0}),l.requesting=!0,new n.ChangeBuildConsultant({buildId:l.chooseBuildItem.buildId,userId:this.currentItem.userId}).send().then(function(i){if(i.errCode!==o.Const.success)return Promise.reject(i);e.showSetModal=!1,e.iniData(),t.hideLoading(),e.cancelAuthority(),l.requesting=!1,e.chooseBuildModal=!1,e.DifferenceApi.showToast("人员调动成功")}).catch(function(i){t.hideLoading(),l.requesting=!1,e.DifferenceApi.showToast(i.errMsg||"人员调动失败")}))},yjConfig:function(t){t.classNameDisabled&&t.classNameDisabled.indexOf("fixed_item_disabled")>=0||this.onYgModalChanged(!0)},authorityChange:function(t){var e={},i=!0,n=!1,o=void 0;try{for(var s,r=(t.detail.value||[])[Symbol.iterator]();!(i=(s=r.next()).done);i=!0){var a=s.value;e[Number(a)]=!0}}catch(u){n=!0,o=u}finally{try{i||null==r.return||r.return()}finally{if(n)throw o}}this.checkedAuthorityMap=e},cancelAuthority:function(){this.authorityModal=!1},confirmAuthority:function(){var e=this,i=[],s="";for(var r in this.checkedAuthorityMap)this.checkedAuthorityMap[r]&&i.push(Number(r));i.length>0&&(s=i.join(" ")),l.requesting||(t.showLoading({title:"设置中...",mask:!0}),l.requesting=!0,new n.PermissionsAllocation({userJurisdiction:s,userId:this.currentItem.userId}).send().then(function(i){if(i.errCode!==o.Const.success)return Promise.reject(i);e.showSetModal=!1,e.iniData(),t.hideLoading(),e.cancelAuthority(),l.requesting=!1,e.DifferenceApi.showToast("权限设置成功")}).catch(function(i){t.hideLoading(),l.requesting=!1,e.DifferenceApi.showToast(i.errMsg||"权限设置失败")}))},goToDetail:function(e){t.navigateTo({url:"/pagesStaff/staffCustomerList/staffCustomerList?userId="+e.userId+"&userName="+e.userName})}}};e.default=d}).call(this,i("543d")["default"])},e569:function(t,e,i){"use strict";i.r(e);var n=i("96fb"),o=i("8ac8");for(var s in o)"default"!==s&&function(t){i.d(e,t,function(){return o[t]})}(s);i("9e2b");var r=i("2877"),a=Object(r["a"])(o["default"],n["a"],n["b"],!1,null,null,null);e["default"]=a.exports},f390:function(t,e,i){}},[["1aed","common/runtime","common/vendor"]]]);