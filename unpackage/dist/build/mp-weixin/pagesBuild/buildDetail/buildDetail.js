(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesBuild/buildDetail/buildDetail"],{"0440":function(i,o,t){"use strict";var e=t("356a"),l=t.n(e);l.a},"12fe":function(i,o,t){},"1dde":function(i,o,t){"use strict";(function(i){t("d3e9"),t("921b");e(t("66fd"));var o=e(t("f8a2"));function e(i){return i&&i.__esModule?i:{default:i}}i(o.default)}).call(this,t("543d")["createPage"])},"356a":function(i,o,t){},5399:function(i,o,t){"use strict";var e=t("12fe"),l=t.n(e);l.a},"80de":function(i,o,t){"use strict";var e=function(){var i=this,o=i.$createElement,t=(i._self._c,i.__map(i.layoutLists,function(o,t){var e=i.setLayout(o.rooms,o.halls,o.weis,o.yangs);return{$orig:i.__get_orig(o),m0:e}}));i.$mp.data=Object.assign({},{$root:{l0:t}})},l=[];t.d(o,"a",function(){return e}),t.d(o,"b",function(){return l})},"8dc0":function(i,o,t){"use strict";(function(i){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var e=t("835c"),l=t("6594"),n=t("a0ec"),u=t("10c9"),a=t("baf9"),r=t("5e58");function s(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function c(i,o,t){return o in i?Object.defineProperty(i,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[o]=t,i}var d=function(){return t.e("components/houseDetail/houseSwiper").then(t.bind(null,"1c2a"))},p=function i(){s(this,i)};c(p,"saveScrollTop",0),c(p,"scrollHeight",0);var m={data:function(){return{accountSource:null,buildId:"",swiperList:[],information:{averagePrice:null,buildName:"",buildAddr:"",reportCount:null,bandCount:null,subscription:null},isShowBox:!1,selectBoxValue:"",selectBoxList:[{name:"合作规则",value:"hzgz"},{name:"分销户型",value:"fxhx"},{name:"拓客技巧",value:"tkjq"},{name:"楼盘卖点",value:"lpmd"},{name:"楼盘动态",value:"lpdt"}],cooperationRule:{},commisonRule:{},distributionRule:{},layoutLists:[],buildTypeObj:n.Const.buildTypeObj,extensionTechnique:{},buildSellingPoint:{},isShowDynamic:!1,buildDynamic:{},scrollTopObj:{hzgz:{num:0,compareNum:0},fxhx:{num:0,compareNum:0},tkjq:{num:0,compareNum:0},lpmd:{num:0,compareNum:0},lpdt:{num:0,compareNum:0}},scrollTop:{num:0,height:0,max:0,isFirst:!0},viewTimeScroll:null}},components:{houseSwiper:d},onLoad:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.buildId=i.buildId,this.initData(),(new a.Notification).addObserver(this,"updateData",u.Notify.CreateActivityChange.Name),(new a.Notification).addObserver(this,"updateData",u.Notify.PhotoChange.Name),(new a.Notification).addObserver(this,"updateData",u.Notify.DistributionChange.Name),(new a.Notification).addObserver(this,"updateData",u.Notify.DistributionDelChange.Name),(new a.Notification).addObserver(this,"updateData",u.Notify.RuleChange.Name)},onShow:function(){this.accountSource=l.GetLoginModel.getAccountSource()},methods:{getNodeInfo:function(){var o=this,t=i.createSelectorQuery().in(this);t.select("#hzgz").boundingClientRect(function(i){o.scrollTopObj["hzgz"].compareNum=i.top-50,o.scrollTopObj["hzgz"].num=i.top-50}).select("#fxhx").boundingClientRect(function(i){o.scrollTopObj["fxhx"].compareNum=i.top-50,o.scrollTopObj["fxhx"].num=i.top-50}).select("#tkjq").boundingClientRect(function(i){o.scrollTopObj["tkjq"].compareNum=i.top-50,o.scrollTopObj["tkjq"].num=i.top-50}).select("#lpmd").boundingClientRect(function(i){o.scrollTopObj["lpmd"].compareNum=i.top-50,o.scrollTopObj["lpmd"].num=i.top-50}).select("#lpdt").boundingClientRect(function(i){o.scrollTopObj["lpdt"].compareNum=i.top-50,o.scrollTopObj["lpdt"].num=i.top-50}).select("#scrollView").fields({scrollOffset:!0,size:!0},function(i){for(var t in o.scrollTop.max=p.scrollHeight-i.height,o.scrollTopObj)o.scrollTopObj[t].num>o.scrollTop.max&&(o.scrollTopObj[t].num=o.scrollTop.max)}).exec()},updateData:function(){this.initData()},initData:function(){var o=this;new e.GetNewBuildDetail({buildId:this.buildId}).send().then(function(t){if(console.log(t),t.errCode===n.Const.success){var e=t.data;i.setNavigationBarTitle({title:e.buildName});var l=[],u=e.vrList||[],a=e.photoList||[],r=!0,s=!1,c=void 0;try{for(var d,p=u[Symbol.iterator]();!(r=(d=p.next()).done);r=!0){var m=d.value;l.push({url:m.photoAddr,type:"vr",sourceUrl:m.panoramaPlayUrl})}}catch(S){s=!0,c=S}finally{try{r||null==p.return||p.return()}finally{if(s)throw c}}var h=!0,f=!1,b=void 0;try{for(var g,v=a[Symbol.iterator]();!(h=(g=v.next()).done);h=!0){var T=g.value;l.push({url:T,type:"img",sourceUrl:T})}}catch(S){f=!0,b=S}finally{try{h||null==v.return||v.return()}finally{if(f)throw b}}o.swiperList=l,o.information.averagePrice=e.averagePrice||"",o.information.buildName=e.buildName||"",o.information.buildAddr=e.buildAddr||"",o.information.reportCount=e.reportCount||"",o.information.bandCount=e.bandCount||"",o.information.subscription=e.subscription||"",o.cooperationRule.cooperationTime=e.distributionRule.cooperationTime||"",o.cooperationRule.exclusiveDiscount=e.exclusiveDiscount||"",o.cooperationRule.groupPurchaseDiscount=e.groupPurchaseDiscount||"",o.commisonRule=e.commisonRule||{},o.distributionRule=e.distributionRule||{};var y=e.layoutLists||[],x=!0,D=!1,N=void 0;try{for(var w,j=y[Symbol.iterator]();!(x=(w=j.next()).done);x=!0){var O=w.value;O.tagIds?(O.tagIdsShow=O.tagIds.split("|"),O.tagIdsShow.length>2&&(O.tagIdsShow=O.tagIdsShow.splice(0,2))):O.tagIdsShow=[]}}catch(S){D=!0,N=S}finally{try{x||null==j.return||j.return()}finally{if(D)throw N}}y.length>3?o.layoutLists=y.splice(0,3):o.layoutLists=y||[],o.extensionTechnique=e.extensionTechnique||{},o.buildSellingPoint=e.buildSellingPoint||{},o.isShowDynamic=!1,o.buildDynamic=e.buildDynamic||{},e.buildDynamic&&(o.isShowDynamic=!0),o.$nextTick(function(){o.scrollTop.num=1})}else o.DifferenceApi.showToast(t.errMsg)})},viewPagesScroll:function(i){var o=i.detail.scrollTop;if(this.scrollTop.isFirst)return p.scrollHeight=i.detail.scrollHeight,this.getNodeInfo(),void(this.scrollTop.isFirst=!1);p.saveScrollTop=o,this.scrollTop.max!==o&&(o<this.scrollTopObj["hzgz"].compareNum&&(this.isShowBox=!1),o>=this.scrollTopObj["hzgz"].compareNum&&o<this.scrollTopObj["fxhx"].compareNum&&(this.selectBoxValue="hzgz",this.isShowBox=!0),o>=this.scrollTopObj["fxhx"].compareNum&&o<this.scrollTopObj["tkjq"].compareNum&&(this.selectBoxValue="fxhx",this.isShowBox=!0),o>=this.scrollTopObj["tkjq"].compareNum&&o<this.scrollTopObj["lpmd"].compareNum&&(this.selectBoxValue="tkjq",this.isShowBox=!0),o>=this.scrollTopObj["lpmd"].compareNum&&o<this.scrollTopObj["lpdt"].compareNum&&(this.selectBoxValue="lpmd",this.isShowBox=!0),o>=this.scrollTopObj["lpdt"].compareNum&&(this.selectBoxValue="lpdt",this.isShowBox=!0))},goToInformation:function(){i.navigateTo({url:"/pagesBuild/buildDetail/information?buildId="+this.buildId})},changeSelectBox:function(i){var o=this;clearTimeout(this.viewTimeScroll),this.scrollTop.num!==p.saveScrollTop&&(this.scrollTop.num=p.saveScrollTop),this.selectBoxValue=i,this.viewTimeScroll=setTimeout(function(){0!==o.scrollTopObj[i].num&&(o.scrollTopObj[i].num<o.scrollTop.max?o.scrollTop.num=o.scrollTopObj[i].num:o.scrollTop.num=o.scrollTop.max)},100)},goToDistributionType:function(){i.navigateTo({url:"/pagesBuild/buildDetail/distributionType?buildId="+this.buildId})},setLayout:function(i,o,t,e){var l=i?i+"室":"",n=o?o+"厅":"",u=t?t+"卫":"",a=e?e+"阳台":"";return l+n+u+a},goToDistributionDynamic:function(){i.navigateTo({url:"/pagesBuild/buildDetail/distributionDynamic?buildId="+this.buildId})},goToSkillPointDetail:function(o){i.navigateTo({url:"/pagesBuild/buildDetail/skillPointList?type="+o+"&buildId="+this.buildId})},postBtn:function(){i.navigateTo({url:"/pagesBuild/buildDetail/releaseTheStory?buildId="+this.buildId})},goToLookOrEditHYZ:function(o){if(1===this.accountSource){if("hzgz"===o)return;var t={cooperationRule:this.cooperationRule||{},commisonRule:this.commisonRule||{},distributionRule:this.distributionRule||{}};(new r.buildModel).setModel(t,"savepageRulesData"),i.navigateTo({url:"/pagesBuild/buildDetail/pageRules?buildId="+this.buildId})}else"hzgz"===o&&i.navigateTo({url:"/pagesBuild/buildDetail/rulesCooperationEdit?buildId="+this.buildId}),"yjgz"===o&&i.navigateTo({url:"/pagesBuild/buildDetail/commissionRuleEdit?buildId="+this.buildId}),"zysx"===o&&i.navigateTo({url:"/pagesBuild/buildDetail/precautionEdit?buildId="+this.buildId})},errorImg:function(){this.buildDynamic.photoUrl="http://cdn.haofang.net/static/xfldDeveloper/build/default-house-img.png"}},onUnload:function(){(new a.Notification).removeObserverAllNotification(this)}};o.default=m}).call(this,t("543d")["default"])},f8a2:function(i,o,t){"use strict";t.r(o);var e=t("80de"),l=t("faf2");for(var n in l)"default"!==n&&function(i){t.d(o,i,function(){return l[i]})}(n);t("0440"),t("5399");var u=t("2877"),a=Object(u["a"])(l["default"],e["a"],e["b"],!1,null,"0708cdb8",null);o["default"]=a.exports},faf2:function(i,o,t){"use strict";t.r(o);var e=t("8dc0"),l=t.n(e);for(var n in e)"default"!==n&&function(i){t.d(o,i,function(){return e[i]})}(n);o["default"]=l.a}},[["1dde","common/runtime","common/vendor"]]]);