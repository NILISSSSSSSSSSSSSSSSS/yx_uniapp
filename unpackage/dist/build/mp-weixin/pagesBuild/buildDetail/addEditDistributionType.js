(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesBuild/buildDetail/addEditDistributionType"],{"04c5":function(t,e,i){},"0f0d":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement;t._self._c},a=[];i.d(e,"a",function(){return s}),i.d(e,"b",function(){return a})},"12e7":function(t,e,i){"use strict";(function(t){i("d3e9"),i("921b");s(i("66fd"));var e=s(i("dbfb"));function s(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},"6dc4":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=i("835c"),a=i("a0ec"),o=i("2f2e"),n=i("5e58"),l=i("10c9"),u=i("baf9"),r={data:function(){return{paramsObj:{buildId:"",buildArea:"",charact:"",downPayments:"",halls:"",layoutId:"",oldLayoutNo:"",layoutNo:"",layoutPics:"",layoutStatus:null,photoIds:"",price:"",rooms:"",tagIds:"",weis:"",yangs:""},layoutStatusList:[{value:1,name:"待售"},{value:2,name:"在售"},{value:3,name:"售罄"}],layoutStatusIndex:null,tagIdsList:[],selectTagIds:[],selectPhotos:[],timeS:null,timeT:null,timeW:null,timeY:null}},onLoad:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.dealTagIds(),this.paramsObj.buildId=e.buildId,"add"===e.type?t.setNavigationBarTitle({title:"添加户型"}):(t.setNavigationBarTitle({title:"编辑户型"}),this.getDetail())},methods:{getDetail:function(){var t=this,e=(new n.buildModel).getModel("distributionItem")||{};for(var i in console.log(e,"obj"),this.paramsObj)this.paramsObj[i]=e[i];this.paramsObj.oldLayoutNo=e.layoutNo,this.paramsObj.buildId=this.buildId,this.layoutStatusList.forEach(function(i,s){e.layoutStatus===i.value&&(t.layoutStatusIndex=s)}),e.tagIds&&(this.selectTagIds=e.tagIds.split("|"),this.tagIdsList.forEach(function(e,i){var s=!0,a=!1,o=void 0;try{for(var n,l=t.selectTagIds[Symbol.iterator]();!(s=(n=l.next()).done);s=!0){var u=n.value;e.name===u&&(t.tagIdsList[i].isActive=!0)}}catch(r){a=!0,o=r}finally{try{s||null==l.return||l.return()}finally{if(a)throw o}}}));var s=!0,a=!1,o=void 0;try{for(var l,u=e.list[Symbol.iterator]();!(s=(l=u.next()).done);s=!0){var r=l.value;this.selectPhotos.push({picUrl:r.picUrl,photoId:r.photoId})}}catch(c){a=!0,o=c}finally{try{s||null==u.return||u.return()}finally{if(a)throw o}}},layoutStatusChange:function(t){this.layoutStatusIndex=t.target.value,this.paramsObj.layoutStatus=this.layoutStatusList[t.target.value].value},dealTagIds:function(){var t=a.Const.distributionTypeIds;for(var e in t)this.tagIdsList.push({name:t[e],isActive:!1});console.log(this.tagIdsList,"tagIdsList")},changeTags:function(t,e){if(this.tagIdsList[e].isActive){var i=0;this.selectTagIds.forEach(function(e,s){t===e.name&&(i=s)}),this.selectTagIds.splice(i,1),this.tagIdsList[e].isActive=!1}else{if(this.selectTagIds.length>=3)return void this.DifferenceApi.showToast("最多选择3个");this.selectTagIds.push(t),this.tagIdsList[e].isActive=!0}},uploadImg:function(){var e=this;t.chooseImage({count:1,success:function(i){console.log(i.tempFilePaths[0]),t.showLoading({title:"上传中..."}),(new o.Utils).upLoadImg(i.tempFilePaths[0]).then(function(i){if(console.log(i),t.hideLoading(),i.errCode!==a.Const.success)return Promise.reject(i);var s=i.data||{};if(!s.path||!s.url)return null;e.selectPhotos.push({picUrl:s.url})}).catch(function(e){console.log("err",e),t.hideLoading(),t.showToast({title:e.errMsg||"上传失败",icon:"none"})})}})},saveBtn:function(){var e=this;if(this.paramsObj.layoutNo)if(this.paramsObj.rooms&&this.paramsObj.halls&&this.paramsObj.weis&&this.paramsObj.yangs)if(this.paramsObj.layoutStatus)if(this.paramsObj.buildArea)if(this.paramsObj.price)if(this.paramsObj.downPayments)if(0!==this.selectTagIds.length)if(this.paramsObj.tagIds=this.selectTagIds.join("|"),this.paramsObj.charact)if(0!==this.selectPhotos.length){var i=[],o=[],n=!0,r=!1,c=void 0;try{for(var h,d=this.selectPhotos[Symbol.iterator]();!(n=(h=d.next()).done);n=!0){var f=h.value;i.push(f.picUrl),f.photoId&&o.push(f.photoId)}}catch(m){r=!0,c=m}finally{try{n||null==d.return||d.return()}finally{if(r)throw c}}this.paramsObj.layoutPics=i.join(","),this.paramsObj.photoIds=o.join(","),console.log(this.paramsObj,"paramsObj"),new s.AddAndChangLayOutPhoto(this.paramsObj).send().then(function(i){console.log(i),i.errCode!==a.Const.success?e.DifferenceApi.showToast(i.errMsg):(e.DifferenceApi.showToast("提交成功"),(new u.Notification).postNotification(l.Notify.DistributionChange.Name),t.navigateBack({delta:1}))})}else this.DifferenceApi.showToast("请上传户型图");else this.DifferenceApi.showToast("请输入推荐理由");else this.DifferenceApi.showToast("请选择标签");else this.DifferenceApi.showToast("请输入首付起价");else this.DifferenceApi.showToast("请输入户型总价");else this.DifferenceApi.showToast("请输入面积");else this.DifferenceApi.showToast("请选择状态");else this.DifferenceApi.showToast("请完善户型");else this.DifferenceApi.showToast("请输入户型名称")},inputNumS:function(t){var e=this;clearTimeout(this.timeS),""!==t.detail.value&&Number(t.detail.value)<=0&&(this.timeS=setTimeout(function(){e.paramsObj.rooms=""},10))},inputNumT:function(t){var e=this;clearTimeout(this.timeT),""!==t.detail.value&&Number(t.detail.value)<=0&&(this.timeT=setTimeout(function(){e.paramsObj.halls=""},10))},inputNumW:function(t){var e=this;clearTimeout(this.timeW),""!==t.detail.value&&Number(t.detail.value)<=0&&(this.timeW=setTimeout(function(){e.paramsObj.weis=""},10))},inputNumY:function(t){var e=this;clearTimeout(this.timeY),""!==t.detail.value&&Number(t.detail.value)<=0&&(this.timeY=setTimeout(function(){e.paramsObj.yangs=""},10))}}};e.default=r}).call(this,i("543d")["default"])},"7be8":function(t,e,i){"use strict";i.r(e);var s=i("6dc4"),a=i.n(s);for(var o in s)"default"!==o&&function(t){i.d(e,t,function(){return s[t]})}(o);e["default"]=a.a},8116:function(t,e,i){},"83d2":function(t,e,i){"use strict";var s=i("8116"),a=i.n(s);a.a},"9cf7":function(t,e,i){"use strict";var s=i("04c5"),a=i.n(s);a.a},dbfb:function(t,e,i){"use strict";i.r(e);var s=i("0f0d"),a=i("7be8");for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);i("83d2"),i("9cf7");var n=i("2877"),l=Object(n["a"])(a["default"],s["a"],s["b"],!1,null,"51923648",null);e["default"]=l.exports}},[["12e7","common/runtime","common/vendor"]]]);