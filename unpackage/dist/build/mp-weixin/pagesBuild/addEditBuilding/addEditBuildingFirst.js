(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesBuild/addEditBuilding/addEditBuildingFirst"],{"0c43":function(e,t,i){"use strict";i.r(t);var s=i("f149"),a=i.n(s);for(var n in s)"default"!==n&&function(e){i.d(t,e,function(){return s[e]})}(n);t["default"]=a.a},"0dd5":function(e,t,i){"use strict";(function(e){i("d3e9"),i("921b");s(i("66fd"));var t=s(i("cb9b"));function s(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,i("543d")["createPage"])},4983:function(e,t,i){"use strict";var s=i("d841"),a=i.n(s);a.a},"5b51":function(e,t,i){},"6ec0":function(e,t,i){"use strict";var s=i("5b51"),a=i.n(s);a.a},cb9b:function(e,t,i){"use strict";i.r(t);var s=i("e7e7"),a=i("0c43");for(var n in a)"default"!==n&&function(e){i.d(t,e,function(){return a[e]})}(n);i("6ec0"),i("4983");var r=i("2877"),l=Object(r["a"])(a["default"],s["a"],s["b"],!1,null,"15750fcc",null);t["default"]=l.exports},d841:function(e,t,i){},e7e7:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement;e._self._c},a=[];i.d(t,"a",function(){return s}),i.d(t,"b",function(){return a})},f149:function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i("69cc"),a=i("68bf"),n=i("5e58"),r=i("835c"),l=i("a0ec"),o={data:function(){return{type:"",allParamsObj:{},paramsObj:{buildId:"",district:null,area:null,buildingName:"",propertyType:"",buildingAddr:"",salesAddr:"",buildingType:"",propertyCompany:"",distributionType:null,erpTelephone:"",uuTelephone:""},wuYeTypeList:[{value:"住宅"},{value:"别墅"},{value:"公寓"},{value:"商铺"},{value:"写字楼"},{value:"厂房"},{value:"仓库"},{value:"车库"},{value:"其他"}],wuYeIndex:null,regList:[],regIndex:null,regName:"",sectionList:[],sectionIndex:null,sectionName:"",sectionDisabled:"",buildingTypeList:l.Const.houseTypeList,buildingIndex:null,selectBuildingTypeList:[],houseTypeObj:{},fxTypeList:[{value:"城市楼盘",id:0},{value:"旅游地产",id:1}],fxIndex:null,fxName:""}},onLoad:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.type=t.type,this.getHouseTypeObj(),"add"===t.type?(e.setNavigationBarTitle({title:"添加楼盘"}),this.getRegList()):(e.setNavigationBarTitle({title:"编辑楼盘"}),this.getBuildDetail(t.buildId))},methods:{getBuildDetail:function(e){var t=this;new r.GetBuildingInfo({buildId:e}).send().then(function(e){if(e.errCode!==l.Const.success)t.DifferenceApi.showToast(e.errMsg);else{var i=e.data||{};if(!i)return;for(var s in t.allParamsObj=i,t.paramsObj)t.paramsObj[s]=i[s]||"";t.getRegList(!0),i.area?t.getSectionList(i.district,!0):t.getSectionList(i.district),t.wuYeTypeList.forEach(function(e,s){i.propertyType===e.value&&(t.wuYeIndex=s)});var a=t.paramsObj.buildingType?t.paramsObj.buildingType.split(","):[];t.selectBuildingTypeList=[];var n=!0,r=!1,o=void 0;try{for(var u,c=a[Symbol.iterator]();!(n=(u=c.next()).done);n=!0){var d=u.value;isNaN(d)&&t.selectBuildingTypeList.push(d)}}catch(f){r=!0,o=f}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}t.fxTypeList.forEach(function(e,s){i.distributionType===e.id&&(t.fxName=e.value)})}})},wuYeChangePicker:function(e){this.wuYeIndex=e.target.value,this.paramsObj.propertyType=this.wuYeTypeList[e.target.value].value},regChangePicker:function(e){this.regIndex=e.target.value;var t=this.regList[e.target.value].regId;this.regName=this.regList[e.target.value].regName,this.paramsObj.district=t,this.getSectionList(t)},getRegList:function(e){var t=this,i=s.GetBaseInfoModel.regList()||[],n=[],r=!0,l=!1,o=void 0;try{for(var u,c=i[Symbol.iterator]();!(r=(u=c.next()).done);r=!0){var d=u.value;d.regName&&(d.value=d.regName,n.push(d))}}catch(f){l=!0,o=f}finally{try{r||null==c.return||c.return()}finally{if(l)throw o}}n=n.sort(new a.compare("seqNo").minToMax()),this.regList=n,console.log("regList",this.regList),e&&this.regList.forEach(function(e,i){t.paramsObj.district===e.regId&&(console.log("2342424242",e),t.regIndex=i,t.regName=e.regName)})},getSectionList:function(e,t){var i=this;this.sectionName="",this.sectionIndex="";var a=[],n=!0,r=!1,l=void 0;try{for(var o,u=(s.GetBaseInfoModel.sectionList(e||"")||[])[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var c=o.value;c.sectionName&&(c.value=c.sectionName,a.push(c))}}catch(d){r=!0,l=d}finally{try{n||null==u.return||u.return()}finally{if(r)throw l}}this.sectionList=a||[],this.sectionDisabled=0===this.sectionList.length,console.log("sectionList",this.sectionList,this.sectionList.length),t&&this.sectionList.forEach(function(e,t){Number(i.paramsObj.area)===Number(e.sectionId)&&(i.sectionIndex=t,i.sectionName=e.sectionName)})},sectionChangePicker:function(e){this.sectionIndex=e.target.value,this.sectionName=this.sectionList[e.target.value].sectionName;var t=this.sectionList[e.target.value].sectionId;this.paramsObj.area=t},getHouseTypeObj:function(){var e=l.Const.houseTypeList||[],t=!0,i=!1,s=void 0;try{for(var a,n=e[Symbol.iterator]();!(t=(a=n.next()).done);t=!0){var r=a.value;this.houseTypeObj[r.value]=r.text}}catch(o){i=!0,s=o}finally{try{t||null==n.return||n.return()}finally{if(i)throw s}}console.log(this.houseTypeObj,"houseTypeObj")},buildingTypeChangePicker:function(e){this.buildingIndex=e.target.value;var t=this.buildingTypeList[e.target.value].value;this.selectBuildingTypeList.indexOf(t)>-1||this.selectBuildingTypeList.push(t)},deletBuildingType:function(e){this.selectBuildingTypeList.splice(e,1)},fxTypeChangePicker:function(e){this.fxIndex=e.target.value,this.fxName=this.fxTypeList[e.target.value].value,this.paramsObj.distributionType=this.fxTypeList[e.target.value].id},goToNext:function(){console.log(this.paramsObj,"paramsObj"),this.regName?this.paramsObj.buildingName?this.paramsObj.propertyType?this.paramsObj.buildingAddr?0!==this.selectBuildingTypeList.length?this.fxName?(this.paramsObj.buildingType=this.selectBuildingTypeList.join(","),(new n.buildModel).setModel(this.paramsObj,"saveParamsFirst"),(new n.buildModel).setModel(this.allParamsObj,"saveParams"),e.navigateTo({url:"/pagesBuild/addEditBuilding/addEditBuildingSecond?type="+this.type})):this.DifferenceApi.showToast("请选择分销类型"):this.DifferenceApi.showToast("请选择建筑类型"):this.DifferenceApi.showToast("请输入楼盘地址"):this.DifferenceApi.showToast("请选择物业类型"):this.DifferenceApi.showToast("请输入楼盘名称"):this.DifferenceApi.showToast("请选择行政区")}}};t.default=o}).call(this,i("543d")["default"])}},[["0dd5","common/runtime","common/vendor"]]]);